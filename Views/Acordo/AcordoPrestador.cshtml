@model Deal.Models.UsuarioPrestador
@{
    ViewData["Title"] = "Acordo Prestador";
    Layout = "_LayoutPrestador";
}

<h1>@ViewData["Title"]</h1>
<a asp-action="Home" asp-controller="Prestadores" asp-route-id="@Model.Servico.FkPrestador" class="btn btn-info">Retornar a pagina inicial</a>
<div>
    <h2></h2>
    <div class="AcordoHomePage">
        <div>
            @if (@Model.Acordo.AcordoFinalizado)
            {
                <p>Acordo Finalizado</p>
            }
        </div>
        <div class="UserCard">
            <h3>Cliente</h3>
            <div class="UserPhoto">
                <img width="200px" src="@Model.Servico.Cliente.FotoUsuario" alt="" srcset="">
            </div>
            <p><b>Nome: </b>@Model.Servico.Cliente.Nome</p>
            <hr>
            <h3>Formas de contato:</h3>
            <p><b>Email: </b>@Model.Servico.Cliente.Email</p>
            <p><b>Telefone: </b>@Model.Servico.Cliente.Telefone</p>
            <hr>
            <p><b>Pontuação: </b>@Model.Servico.Cliente.Pontuacao</p>
            <p><b>Serviços Realizados: </b>@Model.Servico.Cliente.QtdAcordoRealizados</p>
            @if (@Model.Acordo.AcordoFinalizado == true && @Model.Acordo.AvaliouCliente != true)
            {
                <a asp-action="AvaliacaoDoCliente" asp-route-id="@Model.Acordo.AcordoId">Avaliar Cliente</a>
            }
            @if (@Model.Acordo.ClienteFinalizaAcordo == true && @Model.Acordo.AcordoFinalizado != true)
            {
                <p>Cliente Gostaria de finalizar o Acordo</p>
            }
            @if (@Model.Acordo.AcordoFinalizado != true && @Model.Acordo.PrestadorFinalizaAcordo != true)
            {
                <a asp-action="PrestadorFinalizaAcordo" asp-route-id="@Model.Acordo.AcordoId" class="btn btn-success">Finalizar Acordo</a>
                <a asp-action="EncerrarAcordo" asp-route-id="@Model.Acordo.AcordoId" class="btn btn-danger">Cancelar Acordo</a>
                <a asp-action="Create" asp-controller="ReportesClientes" asp-route-id="@Model.Acordo.AcordoId" class="btn btn-info">Reportar Cliente</a>
            }
            <a asp-action="Details" asp-controller="Clientes" asp-route-id="@Model.Servico.FkCliente" class="btn btn-info">Ver Perfil</a>
        </div>
        <div class="ServiceInfo">
            <div>
                <h2>Informações do serviço</h2>
                <p><b>Categoria: </b>@Model.Servico.Categoria.Atuacao</p>
                <p><b>Nome: </b>@Model.Servico.Nome</p>
                <p><b>Descrição: </b>@Model.Servico.Descricao</p>
                <p><b>Endereço: </b>@Model.Servico.Endereco</p>
                <input hidden type="text" value="@Model.Servico.Latitude" id="DealLat">
                <input hidden type="text" value="@Model.Servico.Longitude" id="DealLong"> 
                <div class="ServiceLocal">
                    <div class="card-container col-md-4">
                        <div class="map" id="gmp-map"></div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>
@section scripts{
    <script src="~/js/Dealmaps.js"></script>
}