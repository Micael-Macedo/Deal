@model IEnumerable<Deal.Models.Servico>
@{
    ViewData["Title"] = "Meus Serviços";
    int? ClienteIdMeusServicos = ViewBag.ClienteId;
}

<h1>@ViewData["Title"]</h1>
<a asp-action="Home" asp-controller="Clientes" asp-route-id="@ClienteIdMeusServicos" class="btn btn-info">Retornar a pagina
    inicial</a>
    <a asp-action="Create" asp-controller="Servicos" asp-route-id="@ClienteIdMeusServicos" class="btn btn-success">Criar Serviço</a>
<div class="AllServicesCards">
    <div class="row row-cols-1 row-cols-md-3 g-4">

    @foreach (var item in Model)
    {   
        <div class="col">
            <div class="serviceCard">
                <div class="serviceCard-Content">
                    <dl class="row">
                        <dt class="col-sm-2">
                            Servico:
                        </dt>
                        <dd class="col-sm-10">
                            @Html.DisplayFor(modelItem => item.Nome)
                        </dd>
                        <dt class="col-sm-2">
                            Categoria:
                        </dt>
                        <dd class="col-sm-10">
                            @Html.DisplayFor(modelItem => item.Categoria.Atuacao)
                        </dd>
                        <dt class="col-sm-2">
                            Descrição:
                        </dt>
                        <dd class="col-sm-10">
                            @Html.DisplayFor(modelItem => item.Descricao)
                        </dd>
                        <dt class="col-sm-2">
                            Status:
                        </dt>
                        <dd class="col-sm-10">
                            @Html.DisplayFor(modelItem => item.Status)
                        </dd>
                        @if (@item.FkPrestador != null)
                        {
                            <dt class="col-sm-2">
                                Prestador
                            </dt>
                            <dd class="col-sm-10">
                                @Html.DisplayFor(modelItem => item.Prestador.Nome)
                            </dd>
                        }
                    </dl>
                </div>
                <div class="serviceCardButtons">
                    @if (item.IsAcordoFeito != true)
                    {
                        <a asp-action="Edit" asp-route-id="@item.ServicoId" class="btn btn-info">Editar</a> 
                        <span>|</span>
                    }
                    <a asp-action="Details" asp-route-id="@item.ServicoId" class="btn btn-info">Detalhes</a> |
                    @if (item.IsAcordoFeito)
                    {
                        <a asp-action="HomePage" asp-route-id="@item.ServicoId" class="btn btn-info">Ver Acordo</a>
                        <span>|</span>
                    }
                    @if ((item.IsDisponivel == true || item.IsAcordoFeito != true) && item.Status != "Convite enviado")
                    {
                        <a asp-action="AddPrestador" asp-route-id="@item.ServicoId" class="btn btn-success">Selecionar Prestador</a>
                        <span>|</span>
                    }
                    @if (item.IsAcordoFeito != true && item.Status != "Convite enviado" && item.Status != "Prestador Recusou o Serviço")
                    {
                        <a asp-action="ConfirmarAcordo" asp-route-id="@item.ServicoId" class="btn btn-success">Confirmar Acordo</a>
                        <span>|</span>
                    }
                    
                    @if (item.IsAcordoFeito != true)
                    {
                        <a asp-action="ClienteCancelaServico" asp-route-id="@item.ServicoId" class="btn btn-danger">Cancelar Servico</a>
                        <span>|</span>
                    }
                    
                </div>
            </div>
        </div>
    }
    </div>
</div>