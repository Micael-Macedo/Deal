@model IEnumerable<Deal.Models.Servico>
@{
    ViewData["Title"] = "Meus Serviços";
    int? ClienteIdMeusServicos = ViewBag.ClienteId;
}

<div class="container" style="margin-top: 40px">
    <div class="titulo_home">
        <h1 style="font-weight: 840; font-size: 45px;">Meus Serviços</h1>
    </div>
    <a asp-action="Index" asp-controller="Clientes" asp-route-id="@ClienteIdMeusServicos" type="submit" class="btn" style="font-weight: 600; background-color: blueviolet;">Retornar para a página principal</a>

    <div class="AllServicesCards">
        @foreach (var item in Model)
    {   
        <div class="col">
            <div class="serviceCard">
                <div class="serviceCard-Content">
                    <dl class="row">
                        <div class="row" style="margin-bottom: 15px;">
                            <dt class="col-3">
                                <a style="font-weight: 700; font-size: 30px;"> @Html.DisplayFor(modelItem => item.Categoria.Atuacao)</a>
                            </dt>
                        </div>
                        <div class="row">
                            <dt class="col-3">
                                Servico
                                <a style="font-weight: 400;"> @Html.DisplayFor(modelItem => item.Nome)</a>
                            </dt>
    
                            <dt class="col-3">
                                Categoria
                                <a style="font-weight: 400;"> @Html.DisplayFor(modelItem => item.Categoria.Atuacao)</a>
                            </dt>
                        </div>
                        <div class="row" style="margin-top: 20px;">
                            <dt class="col-3">
                                Status
                                <a style="font-weight: 400;">@Html.DisplayFor(modelItem => item.Status)</a>
                            </dt>

                            @if (@item.FkPrestador != null)
                            {
                                <dt class="col-3">
                                    Prestador
                                    <a style="font-weight: 400;">@Html.DisplayFor(modelItem => item.Prestador.Nome)</a>
                                </dt>
                            }
                        </div> 
                        <div class="row" style="margin-top: 20px;">
                                <dt class="col-3">
                                Descrição
                                <p style="font-weight: 400; width: 500px;">@Html.DisplayFor(modelItem => item.Descricao)</p>
                            </dt>
                        </div> 
                    </dl>
                </div>
                <div class="serviceCardButtons">
                    @if (item.IsAcordoFeito != true)
                    {
                        <a asp-action="Edit" asp-route-id="@item.ServicoId" class="btn" style="font-weight: 600; margin: 10px; background-color: #b760e7;">Editar</a> 
                        
                    }
                    <a asp-action="Details" asp-route-id="@item.ServicoId" class="btn" style="font-weight: 600; margin: 10px; background-color: #b760e7;">Detalhes</a>
                    @if (item.IsAcordoFeito)
                    {
                        <a asp-action="HomePage" asp-route-id="@item.ServicoId" class="btn" style="font-weight: 600; margin: 10px; background-color: #b760e7;">Ver Acordo</a>
                        
                    }
                    @if ((item.IsDisponivel == true || item.IsAcordoFeito != true) && item.Status != "Convite enviado")
                    {
                        <a asp-action="AddPrestador" asp-route-id="@item.ServicoId" class="btn" style="font-weight: 600; margin: 10px; background-color: #b760e7;">Selecionar Prestador</a>
                        
                    }
                    @if (item.IsAcordoFeito != true && item.Status != "Convite enviado" && item.Status != "Prestador Recusou o Serviço")
                    {
                        <a asp-action="ConfirmarAcordo" asp-route-id="@item.ServicoId" class="btn" style="font-weight: 600; margin: 10px; background-color: #35e44c;">Confirmar Acordo</a>
                        
                    }
                    
                    @if (item.IsAcordoFeito != true)
                    {
                        <a asp-action="ClienteCancelaServico" asp-route-id="@item.ServicoId" class="btn" style="font-weight: 600; margin: 10px; background-color: #e21122;">Cancelar Servico</a>
                    }
                    
                </div>
            </div>
        </div>
    }
    </div>
    
    </div>
</div>
</div>

